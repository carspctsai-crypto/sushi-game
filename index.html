<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡åå£½å¸å­¸å ‚ - èªéŸ³å‡ç´šç‰ˆ</title>
    <style>
        :root { --wood: #f4d03f; --bg: #fdf2e9; --sushi-red: #e74c3c; }
        body { font-family: 'PingFang TC', 'Microsoft JhengHei', sans-serif; background-color: var(--bg); display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
        .game-card { background: white; padding: 40px; border-radius: 20px; box-shadow: 0 20px 40px rgba(0,0,0,0.1); width: 400px; text-align: center; border-bottom: 8px solid var(--wood); }
        .stats { display: flex; justify-content: space-between; font-weight: bold; color: #7f8c8d; margin-bottom: 20px; }
        .score-val { color: var(--sushi-red); font-size: 1.2em; }
        .question-box { font-size: 80px; margin: 20px 0; background: #fff; border: 3px dashed #ddd; border-radius: 15px; padding: 10px; position: relative; }
        .sushi-icon { font-size: 30px; position: absolute; top: -20px; left: 50%; transform: translateX(-50%); }
        .options { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
        button { padding: 15px; font-size: 22px; cursor: pointer; border: 2px solid #eee; background: white; border-radius: 12px; transition: all 0.2s; }
        button:hover { transform: translateY(-3px); border-color: var(--wood); background-color: #fff9e6; }
        button:active { transform: translateY(0); }
        .feedback { height: 30px; margin-top: 15px; font-weight: bold; }
    </style>
</head>
<body>

<div class="game-card">
    <div class="stats">
        <div>å¾—åˆ†: <span id="score" class="score-val">0</span></div>
        <div>é¡Œç›®: <span id="count">1</span>/10</div>
    </div>
    
    <div class="question-box">
        <div class="sushi-icon">ğŸ£</div>
        <div id="kana-display">ã‚</div>
    </div>

    <div class="options" id="options-container"></div>
    <div id="feedback" class="feedback"></div>
    
    <button onclick="nextQuestion()" id="next-btn" style="display:none; width:100%; margin-top:20px; background:var(--sushi-red); color:white; border:none;">ä¸‹ä¸€å®¢å£½å¸ â”</button>
</div>

<script>
    // é¡Œåº«ï¼šåŒ…å«å¹³å‡ã€ç‰‡å‡ã€æ¿éŸ³
    const data = [
        {k: 'ã‚', a: 'a', t: 'å¹³'}, {k: 'ã‚¢', a: 'a', t: 'ç‰‡'},
        {k: 'ãŒ', a: 'ga', t: 'æ¿'}, {k: 'ã‚®', a: 'gi', t: 'æ¿'},
        {k: 'ã±', a: 'pa', t: 'æ¿'}, {k: 'ãƒ”', a: 'pi', t: 'æ¿'},
        {k: 'ã™', a: 'su', t: 'å¹³'}, {k: 'ã‚º', a: 'zu', t: 'æ¿'},
        {k: 'ã­', a: 'ne', t: 'å¹³'}, {k: 'ãƒœ', a: 'bo', t: 'æ¿'}
    ];

    let score = 0;
    let currentTask = 1;

    // ç€è¦½å™¨èªéŸ³åŠŸèƒ½
    function speak(text) {
        const msg = new SpeechSynthesisUtterance();
        msg.text = text;
        msg.lang = 'ja-JP'; // è¨­å®šç‚ºæ—¥æ–‡
        window.speechSynthesis.speak(msg);
    }

    function nextQuestion() {
        if(currentTask > 10) {
            alert(`éŠæˆ²çµæŸï¼æ‚¨çš„å¾—åˆ†æ˜¯ï¼š${score}`);
            location.reload();
            return;
        }

        const item = data[Math.floor(Math.random() * data.length)];
        document.getElementById('kana-display').innerText = item.k;
        document.getElementById('feedback').innerText = "";
        document.getElementById('next-btn').style.display = "none";
        document.getElementById('count').innerText = currentTask;
        
        // è‡ªå‹•ç™¼éŸ³ (æ¨¡æ“¬èªéŸ³å¼•å°)
        speak(item.k);

        const container = document.getElementById('options-container');
        container.innerHTML = "";
        
        let choices = [item.a];
        while(choices.length < 4) {
            let r = data[Math.floor(Math.random() * data.length)].a;
            if(!choices.includes(r)) choices.push(r);
        }
        choices.sort(() => Math.random() - 0.5);

        choices.forEach(c => {
            const btn = document.createElement('button');
            btn.innerText = c;
            btn.onclick = () => checkAnswer(c, item.a);
            container.appendChild(btn);
        });
    }

    function checkAnswer(selected, correct) {
        const feedback = document.getElementById('feedback');
        const buttons = document.querySelectorAll('.options button');
        
        // ç¦ç”¨æ‰€æœ‰æŒ‰éˆ•é˜²æ­¢é‡è¤‡é»æ“Š
        buttons.forEach(b => b.disabled = true);

        if(selected === correct) {
            score += 10;
            document.getElementById('score').innerText = score;
            feedback.innerText = "âœ¨ æ­£ç¢ºï¼Oishii!";
            feedback.style.color = "#27ae60";
            speak("æ­£è§£"); // æ’­æ”¾æ­£ç¢ºéŸ³æ•ˆ
        } else {
            feedback.innerText = `âŒ ç­”éŒ¯äº†ï¼Œé€™æ˜¯ "${correct}"`;
            feedback.style.color = "#e74c3c";
            speak("ä¸æ­£è§£"); 
        }
        
        document.getElementById('next-btn').style.display = "block";
        currentTask++;
    }

    // åˆå§‹åŒ–ç¬¬ä¸€é¡Œ
    window.onload = nextQuestion;
</script>

</body>
</html>