<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å‡åå£½å¸å­¸å ‚ - è¡Œå‹•å„ªåŒ–ç‰ˆ</title>
    <style>
        :root { --wood: #f4d03f; --bg: #fdf2e9; --sushi-red: #e74c3c; }
        
        /* éŸ¿æ‡‰å¼ä½ˆå±€å„ªåŒ– */
        body { 
            font-family: 'PingFang TC', 'Microsoft JhengHei', sans-serif; 
            background-color: var(--bg); 
            display: flex; 
            justify-content: center; 
            align-items: flex-start; /* è®“å…§å®¹å¾é ‚éƒ¨é–‹å§‹ï¼Œé˜²æ­¢æ‰‹æ©Ÿåˆ‡æ‰åº•éƒ¨ */
            min-height: 100vh; 
            margin: 0; 
            padding: 15px;
            box-sizing: border-box;
        }

        .game-card { 
            background: white; 
            padding: 20px; 
            border-radius: 20px; 
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); 
            width: 100%; 
            max-width: 400px; 
            text-align: center; 
            border-bottom: 6px solid var(--wood); 
            margin-top: 10px;
        }

        .stats { 
            display: flex; 
            justify-content: space-between; 
            font-weight: bold; 
            color: #7f8c8d; 
            margin-bottom: 10px;
            font-size: 14px;
        }

        .score-val { color: var(--sushi-red); }

        .question-box { 
            font-size: 60px; /* ç¸®å°å­—é«”ä»¥ç¬¦åˆæ‰‹æ©Ÿè¢å¹• */
            margin: 10px 0; 
            background: #fff; 
            border: 2px dashed #ddd; 
            border-radius: 15px; 
            padding: 15px; 
            position: relative; 
        }

        .sushi-icon { font-size: 24px; position: absolute; top: -15px; left: 50%; transform: translateX(-50%); }

        .options { 
            display: grid; 
            grid-template-columns: repeat(2, 1fr); 
            gap: 10px; 
            margin-top: 10px;
        }

        button { 
            padding: 12px 5px; 
            font-size: 18px; 
            cursor: pointer; 
            border: 2px solid #eee; 
            background: white; 
            border-radius: 12px; 
            transition: all 0.2s;
            -webkit-tap-highlight-color: transparent; /* ç§»é™¤æ‰‹æ©Ÿé»æ“Šè—æ¡† */
        }

        button:active { background-color: #fff9e6; transform: scale(0.95); }

        .feedback { 
            height: 24px; 
            margin-top: 10px; 
            font-weight: bold; 
            font-size: 14px;
        }

        #next-btn {
            width: 100%; 
            margin-top: 15px; 
            background: var(--sushi-red); 
            color: white; 
            border: none; 
            padding: 12px;
            font-weight: bold;
        }
    </style>
</head>
<body>

<div class="game-card">
    <div class="stats">
        <div>å¾—åˆ†: <span id="score" class="score-val">0</span></div>
        <div>é¡Œç›®: <span id="count">1</span>/10</div>
    </div>
    
    <div class="question-box">
        <div class="sushi-icon">ğŸ£</div>
        <div id="kana-display">ã‚</div>
    </div>

    <div id="feedback" class="feedback"></div>
    <div class="options" id="options-container"></div>
    
    <button onclick="nextQuestion()" id="next-btn" style="display:none;">ä¸‹ä¸€å®¢å£½å¸ â”</button>
</div>

<script>
    const data = [
        {k: 'ã‚', a: 'a'}, {k: 'ã‚¢', a: 'a'},
        {k: 'ãŒ', a: 'ga'}, {k: 'ã‚®', a: 'gi'},
        {k: 'ã±', a: 'pa'}, {k: 'ãƒ”', a: 'pi'},
        {k: 'ã™', a: 'su'}, {k: 'ã‚º', a: 'zu'},
        {k: 'ã­', a: 'ne'}, {k: 'ãƒœ', a: 'bo'},
        {k: 'ãŸ', a: 'ta'}, {k: 'ã ', a: 'da'}
    ];

    let score = 0;
    let currentTask = 1;

    function speak(text) {
        if ('speechSynthesis' in window) {
            const msg = new SpeechSynthesisUtterance();
            msg.text = text;
            msg.lang = 'ja-JP';
            window.speechSynthesis.speak(msg);
        }
    }

    function nextQuestion() {
        if(currentTask > 10) {
            alert(`éŠæˆ²çµæŸï¼æ‚¨çš„å¾—åˆ†æ˜¯ï¼š${score}`);
            score = 0; currentTask = 1;
            document.getElementById('score').innerText = score;
        }

        const item = data[Math.floor(Math.random() * data.length)];
        document.getElementById('kana-display').innerText = item.k;
        document.getElementById('feedback').innerText = "";
        document.getElementById('next-btn').style.display = "none";
        document.getElementById('count').innerText = currentTask;
        
        speak(item.k);

        const container = document.getElementById('options-container');
        container.innerHTML = "";
        
        let choices = [item.a];
        while(choices.length < 4) {
            let r = data[Math.floor(Math.random() * data.length)].a;
            if(!choices.includes(r)) choices.push(r);
        }
        choices.sort(() => Math.random() - 0.5);

        choices.forEach(c => {
            const btn = document.createElement('button');
            btn.innerText = c;
            btn.onclick = () => checkAnswer(btn, c, item.a);
            container.appendChild(btn);
        });
    }

    function checkAnswer(btn, selected, correct) {
        const feedback = document.getElementById('feedback');
        const buttons = document.querySelectorAll('.options button');
        buttons.forEach(b => b.disabled = true);

        if(selected === correct) {
            score += 10;
            document.getElementById('score').innerText = score;
            feedback.innerText = "âœ¨ æ­£ç¢ºï¼Oishii!";
            feedback.style.color = "#27ae60";
            btn.style.backgroundColor = "#d5f5e3";
        } else {
            feedback.innerText = `âŒ ä¸å°å–”ï¼Œæ˜¯ "${correct}"`;
            feedback.style.color = "#e74c3c";
            btn.style.backgroundColor = "#fadbd8";
        }
        
        document.getElementById('next-btn').style.display = "block";
        currentTask++;
    }

    window.onload = nextQuestion;
</script>

</body>
</html>
